<?xml version="1.0" encoding="UTF-8"?>
<content xmlns:jcr="http://www.jcp.org/jcr/1.0" xmlns:nt="http://www.jcp.org/jcr/nt/1.0"
         xmlns:jnt="http://www.jahia.org/jahia/nt/1.0" xmlns:test="http://www.apache.org/jackrabbit/test"
         xmlns:sv="http://www.jcp.org/jcr/sv/1.0" xmlns:jmix="http://www.jahia.org/jahia/mix/1.0"
         xmlns:j="http://www.jahia.org/jahia/1.0" xmlns:mix="http://www.jcp.org/jcr/mix/1.0" xmlns:rep="internal">
    <templateSets jcr:primaryType="jnt:templateSets">
        <blog jcr:primaryType="jnt:virtualsite" j:installedModules="blog" j:siteType="module">
            <templates jcr:primaryType="jnt:templatesFolder">
                <base jcr:mixinTypes="jmix:theme" jcr:primaryType="jnt:template" j:view="apps">
                    <blog-home jcr:primaryType="jnt:pageTemplate">
                        <pagecontent jcr:primaryType="jnt:contentList">
                            <row column="2col115" jcr:primaryType="jnt:row"/>
                        </pagecontent>
                        <row-col1 j:skin="skins.box5style1" jcr:mixinTypes="jmix:skinnable"
                                  jcr:primaryType="jnt:contentList">
                            <new-blog jcr:mixinTypes="jmix:requiredPermissions"
                                      j:requiredPermissions="/permissions/actions/blog/createNewBlog"
                                      j:requiredMode="live" templateNode="/templateSets/blog/templates/base/blog"
                                      buttonLabel="create" jcr:primaryType="jnt:pageFormCreation"
                                      j:requireLoggedUser="true">
                                <j:translation_en jcr:language="en" jcr:mixinTypes="mix:title" jcr:title="New Blog"
                                                  jcr:primaryType="jnt:translation"/>
                            </new-blog>
                            <topBlog jcr:mixinTypes="jmix:requiredPermissions" j:requiredPermissions=""
                                     j:subNodesView="blogList" j:requiredMode="live" jcr:primaryType="jnt:topBlog"
                                     j:requireLoggedUser="false"/>
                            <list jcr:mixinTypes="jmix:renderable jmix:columns" jcr:primaryType="jnt:contentList"
                                  j:view="columns" j:columns="2">
                                <j:translation_en jcr:language="en" jcr:mixinTypes="mix:title" jcr:title="list"
                                                  jcr:primaryType="jnt:translation"/>
                                <topBlogContent jcr:mixinTypes="jmix:renderable jmix:listOrdered jmix:columns"
                                                j:subNodesView="blogList" jcr:primaryType="jnt:topBlogContent"
                                                j:className="simple" j:view="unordered"/>
                                <topBlogComment jcr:mixinTypes="jmix:renderable jmix:listOrdered"
                                                j:subNodesView="blogList" jcr:primaryType="jnt:topBlogComment"
                                                j:className="simple" j:view="unordered"/>
                            </list>
                        </row-col1>
                    </blog-home>
                    <blog jcr:primaryType="jnt:pageTemplate">
                        <pagecontent jcr:primaryType="jnt:contentList">
                            <row column="2col115" jcr:primaryType="jnt:row"/>
                        </pagecontent>
                        <row-col1 j:skin="skins.box6" jcr:mixinTypes="jmix:skinnable" jcr:primaryType="jnt:contentList">
                            <blog-content jcr:mixinTypes="jmix:requiredPermissions" j:subNodesView="short"
                                          j:requiredMode="live" jcr:primaryType="jnt:area"
                                          j:allowedTypes="jnt:blogContent"/>
                        </row-col1>
                        <row-col2 jcr:primaryType="jnt:contentList">
                            <Welcome-message jcr:primaryType="jnt:area" j:allowedTypes="jnt:bigText"/>
                            <authorDisplay j:userView="blog" jcr:primaryType="jnt:authorDisplay"/>
                            <addBlogLink jcr:mixinTypes="jmix:requiredPermissions"
                                         j:requiredPermissions="/permissions/actions/blog/addBlogEntry"
                                         j:requiredMode="live" jcr:primaryType="jnt:addBlogLink"/>
                            <calendar startDateProperty="jcr:created" endDateProperty="jcr:created"
                                      jcr:primaryType="jnt:calendar"
                                      j:bindedComponent="/templateSets/blog/templates/base/blog/row-col1/blog-content"/>
                            <facets jcr:primaryType="jnt:facets"
                                    j:bindedComponent="/templateSets/blog/templates/base/blog/row-col1/blog-content">
                                <fieldFacet mincount="1" field="jmix:tagged;j:tags" jcr:primaryType="jnt:fieldFacet"
                                            missing="false" facet="tags" offset="0" sort="true" limit="100">
                                    <j:translation_en jcr:language="en" label="Tags" jcr:primaryType="jnt:translation"/>
                                </fieldFacet>
                            </facets>
                            <topBlogComment jcr:mixinTypes="jmix:renderable jmix:listOrdered jmix:requiredPermissions"
                                            j:requiredPermissions="" j:subNodesView="blogList" j:requiredMode="live"
                                            jcr:primaryType="jnt:topBlogComment" j:requireLoggedUser="false"
                                            j:className="simple" j:view="unordered"/>
                        </row-col2>
                        <illustration jcr:primaryType="jnt:contentList">
                            <illustration j:level="1" jcr:primaryType="jnt:levelAbsoluteArea"
                                          j:allowedTypes="jnt:imageReference"/>
                        </illustration>
                    </blog>
                    <blog-edit j:requiredPermissions="/permissions/actions/blog/editBlogEntry"
                               jcr:primaryType="jnt:contentTemplate" j:applyOn="jnt:blogContent">
                        <pagecontent jcr:primaryType="jnt:contentList">
                            <row column="2col115" jcr:primaryType="jnt:row"/>
                        </pagecontent>
                        <row-col1 j:skin="skins.box5style1" jcr:mixinTypes="jmix:skinnable"
                                  jcr:primaryType="jnt:contentList">
                            <edit jcr:mixinTypes="jmix:requiredPermissions" j:requiredPermissions=""
                                  j:requiredMode="live" jcr:primaryType="jnt:blogEntryFormEdition"
                                  j:requireLoggedUser="false">
                                <j:translation_en jcr:language="en" jcr:mixinTypes="mix:title" jcr:title="Edit"
                                                  jcr:primaryType="jnt:translation"/>
                            </edit>
                        </row-col1>
                        <row-col2 jcr:primaryType="jnt:contentList"/>
                    </blog-edit>
                    <blog-content jcr:primaryType="jnt:contentTemplate" j:applyOn="jnt:blogContent"
                                  j:defaultTemplate="true">
                        <pagecontent jcr:primaryType="jnt:contentList">
                            <row column="2col115" jcr:primaryType="jnt:row"/>
                        </pagecontent>
                        <row-col1 j:skin="skins.box6" jcr:mixinTypes="jmix:skinnable" jcr:primaryType="jnt:contentList">
                            <mainResourceDisplay jcr:primaryType="jnt:mainResourceDisplay"/>
                            <document-history j:skin="skins.box2" jcr:mixinTypes="jmix:skinnable"
                                              jcr:primaryType="jnt:contentList">
                                <j:translation_en jcr:language="en" jcr:mixinTypes="mix:title" jcr:title="Comments"
                                                  jcr:primaryType="jnt:translation"/>
                                <commentsList jcr:primaryType="jnt:commentsList"
                                              j:bindedComponent="/templateSets/blog/templates/base/blog-content/row-col1/mainResourceDisplay"/>
                                <addComment jcr:mixinTypes="jmix:requiredPermissions"
                                            j:requiredPermissions="/permissions/actions/blog/commentBlog"
                                            j:requiredMode="live" jcr:primaryType="jnt:addComment"
                                            j:requireLoggedUser="false"
                                            j:bindedComponent="/templateSets/blog/templates/base/blog-content/row-col1/mainResourceDisplay"/>
                            </document-history>
                        </row-col1>
                        <row-col2 jcr:primaryType="jnt:contentList">
                            <back-to-parent-page jcr:primaryType="jnt:backToParentPage">
                                <j:translation_en jcr:language="en" jcr:mixinTypes="mix:title"
                                                  jcr:title="Back to parent page" jcr:primaryType="jnt:translation"/>
                            </back-to-parent-page>
                        </row-col2>
                    </blog-content>
                    <blog-new jcr:primaryType="jnt:pageTemplate" j:hiddenTemplate="true">
                        <pagecontent jcr:primaryType="jnt:contentList">
                            <row column="2col115" jcr:primaryType="jnt:row"/>
                        </pagecontent>
                        <row-col1 j:skin="skins.box5style1" jcr:mixinTypes="jmix:skinnable"
                                  jcr:primaryType="jnt:contentList">
                            <blogEntryFormCreation j:requiredPermissions="" jcr:mixinTypes="jmix:requiredPermissions"
                                                   j:requiredMode="live" jcr:primaryType="jnt:blogEntryFormCreation"
                                                   j:requireLoggedUser="false"/>
                        </row-col1>
                        <row-col2 jcr:primaryType="jnt:contentList"/>
                    </blog-new>
                </base>
                <contents jcr:primaryType="jnt:contentFolder"/>
                <files jcr:primaryType="jnt:folder"/>
            </templates>
        </blog>
    </templateSets>

    <permissions jcr:primaryType="jnt:permission">
        <actions jcr:primaryType="jnt:permission">
            <blog jcr:primaryType="jnt:permission">
                <createNewBlog jcr:primaryType="jnt:permission"/>
                <commentBlog jcr:primaryType="jnt:permission"/>
                <addBlogEntry jcr:primaryType="jnt:permission"/>
                <editBlogEntry jcr:primaryType="jnt:permission"/>
            </blog>
        </actions>
    </permissions>

    <roles>
        <visitor jcr:primaryType="jnt:role"
                 j:permissions="/permissions/actions/blog/createNewBlog /permissions/actions/blog/commentBlog"/>
    </roles>
</content>

