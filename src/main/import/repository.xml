<?xml version="1.0" encoding="UTF-8"?>
<content xmlns:jcr="http://www.jcp.org/jcr/1.0" xmlns:nt="http://www.jcp.org/jcr/nt/1.0" xmlns:jnt="http://www.jahia.org/jahia/nt/1.0" xmlns:sv="http://www.jcp.org/jcr/sv/1.0" xmlns:jmix="http://www.jahia.org/jahia/mix/1.0" xmlns:j="http://www.jahia.org/jahia/1.0" xmlns:mix="http://www.jcp.org/jcr/mix/1.0" xmlns:rep="internal">
    <templateSets jcr:primaryType="jnt:templateSets">
        <blog changefreq="monthly" j:installedModules="blog" j:siteType="module" j:wcagCompliance="true" jcr:mixinTypes="jmix:sitemap" jcr:primaryType="jnt:virtualsite" priority="0.5">
            <templates jcr:primaryType="jnt:templatesFolder">
                <base j:view="apps" jcr:mixinTypes="jmix:theme" jcr:primaryType="jnt:template">
                    <blog-home jcr:primaryType="jnt:pageTemplate">
                        <pagecontent jcr:primaryType="jnt:contentList">
                            <row column="1col16" jcr:primaryType="jnt:row" />
                        </pagecontent>
                        <row-col1 j:style="black" jcr:mixinTypes="jmix:style" jcr:primaryType="jnt:contentList">
                            <j:translation_en jcr:language="en" jcr:primaryType="jnt:translation" />
                            <create-new-blog j:skin="skins.box8" j:style="blue" jcr:mixinTypes="jmix:skinnable jmix:style" jcr:primaryType="jnt:contentList">
                                <j:translation_en jcr:language="en" jcr:mixinTypes="mix:title" jcr:primaryType="jnt:translation" jcr:title="Create new blog" />
                                <new-blog buttonLabel="create" j:requireLoggedUser="true" j:requiredMode="live" j:requiredPermissions="/permissions/actions/blog/createNewBlog" jcr:mixinTypes="jmix:requiredPermissions" jcr:primaryType="jnt:pageFormCreation" templateNode="/templateSets/blog/templates/base/blog" useDescription="true">
                                    <j:translation_en jcr:language="en" jcr:mixinTypes="mix:title" jcr:primaryType="jnt:translation" jcr:title="New Blog" />
                                </new-blog>
                            </create-new-blog>
                            <topBlog j:expiration="900" j:perUser="false" j:requireLoggedUser="false" j:requiredMode="live" j:skin="skins.box8" j:style="grey" j:subNodesView="blogList" jcr:mixinTypes="jmix:style jmix:cache jmix:requiredPermissions jmix:skinnable" jcr:primaryType="jnt:topBlog">
                                <j:translation_en jcr:language="en" jcr:mixinTypes="mix:title" jcr:primaryType="jnt:translation" jcr:title="Top Blog" />
                            </topBlog>
                            <list j:columns="2" j:view="columns" jcr:mixinTypes="jmix:renderable jmix:columns" jcr:primaryType="jnt:contentList">
                                <j:translation_en jcr:language="en" jcr:mixinTypes="mix:title" jcr:primaryType="jnt:translation" jcr:title="list" />
                                <top-content j:skin="skins.box8" j:style="grey" jcr:mixinTypes="jmix:skinnable jmix:style" jcr:primaryType="jnt:contentList">
                                    <j:translation_en jcr:language="en" jcr:mixinTypes="mix:title" jcr:primaryType="jnt:translation" jcr:title="Top Blog Content" />
                                    <topBlogContent j:className="simple" j:expiration="900" j:perUser="false" j:subNodesView="blogList" j:view="unordered" jcr:mixinTypes="jmix:cache jmix:renderable jmix:listOrdered jmix:columns" jcr:primaryType="jnt:topBlogContent" />
                                </top-content>
                                <top-blog-coment j:skin="skins.box8" j:style="grey" jcr:mixinTypes="jmix:skinnable jmix:style" jcr:primaryType="jnt:contentList">
                                    <j:translation_en jcr:language="en" jcr:mixinTypes="mix:title" jcr:primaryType="jnt:translation" jcr:title="Top blog Coment" />
                                    <topBlogComment j:className="simple" j:expiration="900" j:perUser="false" j:subNodesView="blogList" j:view="unordered" jcr:mixinTypes="jmix:cache jmix:renderable jmix:listOrdered" jcr:primaryType="jnt:topBlogComment" />
                                </top-blog-coment>
                            </list>
                        </row-col1>
                        <row-col2 jcr:primaryType="jnt:contentList" />
                    </blog-home>
                    <blog jcr:primaryType="jnt:pageTemplate">
                        <pagecontent jcr:primaryType="jnt:contentList">
                            <pageTitle jcr:primaryType="jnt:pageTitle" />
                            <row column="2col115" jcr:primaryType="jnt:row" />
                        </pagecontent>
                        <row-col1 j:skin="skins.box8" j:style="blue" jcr:mixinTypes="jmix:skinnable jmix:style" jcr:primaryType="jnt:contentList">
                            <blog-content firstDirection="desc" firstField="jcr:created" j:allowedTypes="jnt:blogContent" j:requiredMode="live" j:subNodesView="short" jcr:mixinTypes="jmix:orderedList jmix:requiredPermissions" jcr:primaryType="jnt:area" secondDirection="asc" thirdDirection="asc" />
                            <j:translation_en jcr:language="en" jcr:mixinTypes="mix:title" jcr:primaryType="jnt:translation" jcr:title="Blog List" />
                        </row-col1>
                        <row-col2 jcr:mixinTypes="jmix:style" jcr:primaryType="jnt:contentList">
                            <Welcome-message j:allowedTypes="jnt:bigText" jcr:primaryType="jnt:area" />
                            <jahiapp-blog-logo.png j:node="" jcr:primaryType="jnt:contentReference" />
                            <addBlogLink aClass="addArticle" divClass="addArticle" j:bindedComponent="/templateSets/blog/templates/base/blog" j:requiredMode="live" j:requiredPermissions="/permissions/actions/blog/addBlogEntry" jcr:mixinTypes="jmix:requiredPermissions" jcr:primaryType="jnt:componentLink" targetTemplate="blog-new">
                                <j:translation_en jcr:language="en" jcr:mixinTypes="mix:title" jcr:primaryType="jnt:translation" jcr:title="Add a new blog entry" />
                            </addBlogLink>
                            <contentList j:skin="skins.box6" j:style="blue" jcr:mixinTypes="jmix:skinnable jmix:style" jcr:primaryType="jnt:contentList">
                                <authorDisplay j:userView="blog" jcr:primaryType="jnt:authorDisplay" />
                            </contentList>
                            <calendar endDateProperty="jcr:created" j:bindedComponent="/templateSets/blog/templates/base/blog/row-col1/blog-content" jcr:primaryType="jnt:calendar" startDateProperty="jcr:created" />
                            <facets j:bindedComponent="/templateSets/blog/templates/base/blog/row-col1/blog-content" j:expiration="900" j:perUser="false" jcr:mixinTypes="jmix:cache" jcr:primaryType="jnt:facets">
                                <fieldFacet facet="tags" field="jmix:tagged;j:tags" jcr:primaryType="jnt:fieldFacet" limit="100" mincount="1" missing="false" offset="0" sort="true">
                                    <j:translation_en jcr:language="en" jcr:primaryType="jnt:translation" label="Tags" />
                                </fieldFacet>
                            </facets>
                            <last-comments j:skin="skins.box8" j:style="grey" jcr:mixinTypes="jmix:skinnable jmix:style" jcr:primaryType="jnt:contentList">
                                <j:translation_en jcr:language="en" jcr:mixinTypes="mix:title" jcr:primaryType="jnt:translation" jcr:title="Last comments" />
                                <topBlogComment j:className="simple" j:expiration="900" j:perUser="false" j:requireLoggedUser="false" j:requiredMode="live" j:subNodesView="blogList" j:view="unordered" jcr:mixinTypes="jmix:cache jmix:renderable jmix:requiredPermissions jmix:listOrdered" jcr:primaryType="jnt:topBlogComment" />
                            </last-comments>
                        </row-col2>
                        <illustration jcr:primaryType="jnt:contentList">
                            <illustration j:allowedTypes="jnt:imageReference" j:level="1" jcr:primaryType="jnt:levelAbsoluteArea" />
                        </illustration>
                    </blog>
                    <blog-edit j:applyOn="jnt:blogContent" j:requiredPermissions="/permissions/actions/blog/editBlogEntry" jcr:primaryType="jnt:contentTemplate">
                        <pagecontent jcr:primaryType="jnt:contentList">
                            <row column="2col124" jcr:primaryType="jnt:row" />
                        </pagecontent>
                        <row-col1 j:skin="skins.box8" j:style="blue" jcr:mixinTypes="jmix:style jmix:skinnable" jcr:primaryType="jnt:contentList">
                            <j:translation_en jcr:language="en" jcr:mixinTypes="mix:title" jcr:primaryType="jnt:translation" jcr:title="Blog edit" />
                            <edit j:requireLoggedUser="false" j:requiredMode="live" jcr:mixinTypes="jmix:requiredPermissions" jcr:primaryType="jnt:blogEntryFormEdition">
                                <j:translation_en jcr:language="en" jcr:mixinTypes="mix:title" jcr:primaryType="jnt:translation" jcr:title="Edit" />
                            </edit>
                        </row-col1>
                        <row-col2 j:skin="skins.box8" j:style="blue" jcr:mixinTypes="jmix:style jmix:skinnable" jcr:primaryType="jnt:contentList">
                            <fileUpload jcr:primaryType="jnt:fileUpload" />
                            <fileList jcr:primaryType="jnt:fileList" />
                            <j:translation_en jcr:language="en" jcr:primaryType="jnt:translation" jcr:title="Resources" />
                        </row-col2>
                    </blog-edit>
                    <blog-content j:applyOn="jnt:blogContent" j:defaultTemplate="true" jcr:primaryType="jnt:contentTemplate">
                        <pagecontent jcr:primaryType="jnt:contentList">
                            <row column="2col115" jcr:primaryType="jnt:row" />
                        </pagecontent>
                        <row-col1 j:skin="skins.box8" j:style="blue" jcr:mixinTypes="jmix:skinnable jmix:style" jcr:primaryType="jnt:contentList">
                            <mainResourceDisplay jcr:primaryType="jnt:mainResourceDisplay" />
                            <document-history j:skin="skins.box8" j:style="grey" jcr:mixinTypes="jmix:skinnable jmix:style" jcr:primaryType="jnt:contentList">
                                <j:translation_en jcr:language="en" jcr:mixinTypes="mix:title" jcr:primaryType="jnt:translation" jcr:title="Comments" />
                                <commentsList j:bindedComponent="/templateSets/blog/templates/base/blog-content/row-col1/mainResourceDisplay" jcr:primaryType="jnt:commentsList" />
                                <addComment j:bindedComponent="/templateSets/blog/templates/base/blog-content/row-col1/mainResourceDisplay" j:requireLoggedUser="false" j:requiredMode="live" j:requiredPermissions="/permissions/actions/blog/commentBlog" jcr:mixinTypes="jmix:requiredPermissions" jcr:primaryType="jnt:addComment" />
                            </document-history>
                            <j:translation_en jcr:language="en" jcr:mixinTypes="mix:title" jcr:primaryType="jnt:translation" jcr:title="Blog content" />
                        </row-col1>
                        <row-col2 jcr:mixinTypes="jmix:style" jcr:primaryType="jnt:contentList">
                            <jahiapp-blog-logo.png j:node="" jcr:primaryType="jnt:contentReference" />
                            <back-to-parent-page jcr:primaryType="jnt:backToParentPage">
                                <j:translation_en jcr:language="en" jcr:mixinTypes="mix:title" jcr:primaryType="jnt:translation" jcr:title="Back to parent page" />
                            </back-to-parent-page>
                        </row-col2>
                    </blog-content>
                    <blog-new j:hiddenTemplate="true" jcr:primaryType="jnt:pageTemplate">
                        <pagecontent jcr:primaryType="jnt:contentList">
                            <row column="1col16" jcr:primaryType="jnt:row" />
                        </pagecontent>
                        <row-col1 j:skin="skins.box8" j:style="blue" jcr:mixinTypes="jmix:skinnable jmix:style" jcr:primaryType="jnt:contentList">
                            <blogEntryFormCreation j:requireLoggedUser="false" j:requiredMode="live" jcr:mixinTypes="jmix:requiredPermissions" jcr:primaryType="jnt:blogEntryFormCreation" />
                            <j:translation_en jcr:language="en" jcr:mixinTypes="mix:title" jcr:primaryType="jnt:translation" jcr:title="Blog new" />
                        </row-col1>
                    </blog-new>
                </base>
                <contents jcr:primaryType="jnt:contentFolder" />
                <files jcr:primaryType="jnt:folder">
                    <jahiapp-blog-logo.png j:height="66" j:width="129" jcr:mixinTypes="jmix:image" jcr:primaryType="jnt:file">
                        <jcr:content jcr:mimeType="image/png" jcr:primaryType="jnt:resource" />
                        <thumbnail jcr:mimeType="image/png" jcr:primaryType="jnt:resource" />
                        <thumbnail2 jcr:mimeType="image/png" jcr:primaryType="jnt:resource" />
                    </jahiapp-blog-logo.png>
                </files>
            </templates>
        </blog>
    </templateSets>
    <permissions jcr:primaryType="jnt:permission">
        <actions jcr:primaryType="jnt:permission">
            <blog jcr:primaryType="jnt:permission">
                <createNewBlog jcr:primaryType="jnt:permission"/>
                <commentBlog jcr:primaryType="jnt:permission"/>
                <addBlogEntry jcr:primaryType="jnt:permission"/>
                <editBlogEntry jcr:primaryType="jnt:permission"/>
            </blog>
        </actions>
    </permissions>

    <roles>
        <visitor jcr:primaryType="jnt:role"
                 j:permissions="/permissions/actions/blog/createNewBlog /permissions/actions/blog/commentBlog"/>
    </roles>
</content>

